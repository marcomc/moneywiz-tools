# ER Diagram (Mermaid)

```mermaid
erDiagram
  Z_PRIMARYKEY {
    INTEGER Z_ENT PK
    TEXT Z_NAME
  }
  ZSYNCOBJECT {
    INTEGER Z_PK PK
    INTEGER Z_ENT
    TEXT ZGID
    -- plus many typed columns depending on Z_ENT
  }

  ZCATEGORYASSIGMENT {
    INTEGER Z_PK PK
    INTEGER ZTRANSACTION
    INTEGER ZCATEGORY
    FLOAT   ZAMOUNT
  }
  Z_36TAGS {
    INTEGER Z_36TRANSACTIONS
    INTEGER Z_35TAGS
  }
  ZWITHDRAWREFUNDTRANSACTIONLINK {
    INTEGER ZREFUNDTRANSACTION
    INTEGER ZWITHDRAWTRANSACTION
  }
  ZUSER {
    INTEGER Z_PK PK
    TEXT    ZSYNCLOGIN
  }

  %% Core relationships
  Z_PRIMARYKEY ||--o{ ZSYNCOBJECT : Z_ENT
  ZSYNCOBJECT ||--o{ ZCATEGORYASSIGMENT : ZTRANSACTION
  ZSYNCOBJECT ||--o{ ZCATEGORYASSIGMENT : ZCATEGORY
  ZSYNCOBJECT ||--o{ Z_36TAGS : Z_36TRANSACTIONS
  ZSYNCOBJECT ||--o{ Z_36TAGS : Z_35TAGS
  ZSYNCOBJECT ||--o{ ZWITHDRAWREFUNDTRANSACTIONLINK : ZREFUNDTRANSACTION
  ZSYNCOBJECT ||--o{ ZWITHDRAWREFUNDTRANSACTIONLINK : ZWITHDRAWTRANSACTION
  ZUSER ||--o{ ZSYNCOBJECT : ZUSER
```

Notes

- Most business rows (accounts, transactions, categories, payees, tags, holdings) live in `ZSYNCOBJECT` with different `Z_ENT` values. Resolve type names via `Z_PRIMARYKEY`.
- Many-to-many relationships are modeled by bridge tables (`ZCATEGORYASSIGMENT`, `Z_36TAGS`).
- Refunds link via `ZWITHDRAWREFUNDTRANSACTIONLINK`.
